{% extends 'maindoctor.html' %} {% load static %}
{% block extra_css %}
    <link href="{% static 'styles/styleforms.css' %}" rel="stylesheet" />

{% endblock %}

{% block content %}

<!-- SIDEBAR -->

<section id="sidebar">
  <a href="#" class="brand">
    <img src="{% static 'images/aiblue.png' %}" alt="icon" class="icon" />
    <span class="text">Radio.AI</span>
  </a>
  <ul class="side-menu top">
    <li>
      <a href="{% url 'radiologist' %}">
        <i class="bx bxs-dashboard"></i>
        <span class="text">Dashboard</span>
      </a>
    </li>
    <li>
      <a href="{% url 'rad_appointments' %}">
        <i class="bx bxs-group"></i>
        <span class="text">My Appointments</span>
      </a>
    </li>
    <li class="active">
      <a href="{% url 'rad_reports' %}">
        <i class="bx bxs-doughnut-chart"></i>
        <span class="text">Reports</span>
      </a>
    </li>
    <li>
      <a href="{% url 'rad_notifications' %}">
        <i class="bx bxs-bell"></i>

        <span class="text">Notifications</span>
      </a>
    </li>
    <li>
      <a href="{% url 'rad_addblog' %}">
        <i class="bx bx-news"></i>
        <span class="text">Publish to Blog</span>
      </a>
    </li>
  </ul>
  <ul class="side-menu">
    <li>
      <a href="{% url 'rad_profil' username=request.user.username %}">
        <i class="bx bx-user"></i>
        <span class="text">Profil</span>
      </a>
    </li>
    <li>
      <a href="#" class="logout">
        <i class="bx bxs-log-out-circle"></i>
        <span class="text">Logout</span>
      </a>
    </li>
  </ul>
</section>
<!-- SIDEBAR -->

<!-- MAIN -->
<main>

  <div class="head-title">
    <div class="left">
      <h1>Radiologist Dashboard</h1>
      <ul class="breadcrumb">
        <li>
          <a href="#">Dashboard</a>
        </li>
        <li><i class="bx bx-chevron-right"></i></li>
        <li>
          <a class="active" href="#">Reports</a>
        </li>
      </ul>
    </div>




<a href="#" class="btn-download" hx-get="{% url 'rad_create_report' %}" hx-target="#myForm" hx-swap="afterend" hx-trigger="click" onclick="hideButton()">
  <i class="bx bx-add-to-queue"></i>
  <span class="text">Update Report</span>
</a>

<script>
  function hideButton() {
    const btnDownload = document.querySelector('.btn-download');
    btnDownload.style.display = 'none';
  }
</script>
  <div id="appointment" class="container"></div>

  {% comment %} <div id="myForm" class="container"></div> {% endcomment %}


  <div class="table-data" id="boxcontent">
    <div class="order">
      <div class="head">
        <h3>Reports</h3>
        <i class="bx bx-search"></i>
        <i class="bx bx-filter"></i>
      </div>
      <table>
        <thead>
          <tr>
            <th>Report Status</th>
            <th>Patient Name</th>
            <th>Type of Exam</th>
            <th>Urgency</th>
            <th>Appointment</th>

          </tr>
        </thead>
        <tbody>
{% for report in reports %}
  {% if report.status == 'R' %}

  <tr>
    <td>{{ report.status }}</td>
    <td>{{ report.patient.firstname }} {{report.patient.lastname}}</td>
    <td>{{ report.exam_type }}</td>
    <td>{{ report.urgency }}</td>

    <td>
        {% if report.appointment %}
          {% if report.appointment.status == 'S' %}
            <span class="status process">Appointment Scheduled</span>
          {% else %}
            <span class="status pending"><a href="#" style='color:#ffffff' class="btn-download" hx-get="{% url 'create_appointment' report.id %}" hx-target="#appointment" hx-swap="afterend" hx-trigger="click" onclick="hideButton()"><i class='bx bx-alarm-add'></i>Add Appointment</a></span>
          {% endif %}
        {% else %}
          <span class="status pending"><i class='bx bx-alarm-add'></i><a href="#" style='color:#ffffff' hx-get="{% url 'create_appointment' report.id %}" hx-target="#appointment" hx-swap="afterend" hx-trigger="click" onclick="hideButton()">Add Appointment</a></span>
        {% endif %}
      {% endif %}
    </td>
  </tr>
{% endfor %}


  
        </tbody>
      </table>
    </div>
  </div>

</main>
<!-- MAIN -->
{% endblock content %}
